# 클래스 다이어그램
```mermaid
classDiagram
    %% 통계 및 배치 관련 클래스
    class ProductStatisticsHistory {
        - Long id
        - Long productId
        - int totalSales
        - LocalDateTime recordedAt
    }

    class BatchProcessor {
        + processTopProducts() List~ProductStatisticsHistory~
    }

    %% 사용자 관련 클래스
    class User {
        - Long id "사용자 ID"
        - String name "사용자 이름"
        - Point point "잔액(포인트)"
        - List<Coupon> coupons
        - List<Order> orders
        + getCoupons() List<Coupon>
    }

    class Point {
        - Long id "포인트" ID"
        - int amount "금액"
        + charge(int amount): void
        + deduct(int amount) boolean
        + getAmount(): int
    }

    class Coupon {
        - Long id
        - String code
        - int discountAmount
        - boolean isUsed
        + use() void
        + isValid() boolean
    }

    %% 상품 관련 클래스
    class Product {
        - Long id "상품 ID"
        - String name "상품명"
        - int price "상품 가격"
        - Stock stock "재고"
        + getProductInfo() Product
    }

    class Stock {
        - Long id "재고 ID"
        - int quantity "수량"
        + getQuantity() int
        + reduceStock(int quantity) boolean
    }

    %% 주문 및 결제 관련 클래스
    class Order {
        - Long id "주문 ID"
        - User user "주문한 사용자"
        - int totalPrice "총 주문 금액"
        - LocalDateTime registeredDateTime "주문 등록 일시"
        - List~OrderProduct~ products "주문한 상품 목록"
        - Coupon appliedCoupon
        + applyCoupon(Coupon) void
        + getFinalPrice() int
    }

    class OrderProduct {
        - Long id "주문 상품 ID"
        - Product product "주문한 상품"
        - Order order "속한 주문"
    }

    class Payment {
        - Long id "결제 ID"
        - Order order "속한 주문"
        - int amount "결제 금액"
        + process() boolean
    }

    %% 관계 정의
    User "1" --> "1" UserPoint
    User "1" <--> "*" Order
    User "1" --> "0..*" Coupon

    Order "1" <--> "*" OrderProduct
    Order "1" --> "0..1" Coupon
    Order "1" <--> "0..1" Payment

    OrderProduct "1" --> "1" Product
    Product "1" --> "1" Stock

    BatchProcessor ..> ProductStatisticsHistory
```